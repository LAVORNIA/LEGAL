<button onclick="mostrarAgenda()" style="margin: 2rem; padding: 0.75rem 1.5rem; font-size: 1rem; border: none; border-radius: 8px; background-color: var(--azul); color: white; cursor: pointer;">
  Solicitar Reunión
</button>

<section class="agenda" id="agendaSection" style="display: none;">
  <h2>Agendá una Reunión</h2>
  <p>Seleccioná una fecha disponible:</p>
  <div id="calendar" style="display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>

  <form class="agenda-form" id="agendaForm" action="mailto:nicolavornia@gmail.com" method="post" enctype="text/plain" onsubmit="return mostrarConfirmacion(event)">
    <input type="text" name="nombre" placeholder="Tu nombre" required>
    <input type="email" name="email" placeholder="Tu email" required>
    <input type="text" name="fecha" id="selectedDate" placeholder="Fecha seleccionada" readonly required>
    <textarea name="descripcion" rows="3" placeholder="Breve descripción del motivo de la reunión" required></textarea>
    <button type="submit">Solicitar Reunión</button>
  </form>
  <div class="confirmation-message" id="confirmacion">
    ¡Gracias! Tu solicitud fue enviada con éxito.
  </div>
</section>

<script>
  function mostrarAgenda() {
    document.getElementById("agendaSection").style.display = "block";
  }

  const calendar = document.getElementById("calendar");
  const bookedDates = ["2025-04-08", "2025-04-10"];
  const today = new Date();
  const selectedDateInput = document.getElementById("selectedDate");

  for (let i = 0; i < 14; i++) {
    const date = new Date(today);
    date.setDate(today.getDate() + i);
    const iso = date.toISOString().split('T')[0];
    const [y, m, d] = iso.split('-');
    const formatted = `${d}/${m}/${y}`;

    const button = document.createElement("button");
    button.style.padding = "0.5rem";
    button.style.borderRadius = "6px";
    button.style.border = "1px solid #ccc";
    button.style.minWidth = "90px";
    button.style.cursor = "pointer";
    button.style.backgroundColor = bookedDates.includes(iso) ? "#ccc" : "#b3f1dd";
    button.textContent = formatted;

    if (bookedDates.includes(iso)) {
      button.disabled = true;
    } else {
      button.onclick = () => {
        selectedDateInput.value = formatted;
      };
    }

    calendar.appendChild(button);
  }

  function mostrarConfirmacion(e) {
    e.preventDefault();
    document.getElementById("confirmacion").style.display = "block";
    setTimeout(() => {
      document.getElementById("agendaForm").submit();
    }, 1000);
    return false;
  }
</script>
